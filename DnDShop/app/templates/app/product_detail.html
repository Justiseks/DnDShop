{% extends "app/layout.html" %}

{% block content %}
<div class="row">
    <div class="col-md-6">
        {% if images %}
        <div class="product-gallery">
            {% for img in images %}
            <img src="{{ img.image.url }}" alt="{{ img.alt_text }}" style="width:100%; margin-bottom:8px; border-radius:6px;">
            {% endfor %}
        </div>
        {% elif product.image %}
        <img src="{{ product.image.url }}" alt="{{ product.title }}" style="width:100%; border-radius:6px;">
        {% else %}
        <div style="width:100%; height:300px; background:#f5f5f5; display:flex; align-items:center; justify-content:center; border-radius:6px;">
            <span>Нет изображения</span>
        </div>
        {% endif %}
    </div>

    <div class="col-md-6">
        <h2>{{ product.title }}</h2>
        <p><strong>Категория:</strong> <a href="{% url 'category' category_slug=product.category.slug %}">{{ product.category.name }}</a></p>

        <h3 style="margin-top:20px;">{{ product.price }} ₽</h3>

        {% if product.available %}
        <p><span class="label label-success">В наличии</span></p>
        {% else %}
        <p><span class="label label-default">Нет в наличии</span></p>
        {% endif %}

        <div style="margin-top:20px;">
            <p>{{ product.description|linebreaks }}</p>
        </div>

        <!-- Кнопка добавления в корзину: использует URL по пути (позже реализуем view) -->
        <form method="post" action="/cart/add/{{ product.id }}/" style="margin-top:15px;">
            {% csrf_token %}
            <div class="form-group">
                <label>Количество</label>
                <input type="number" name="quantity" value="1" min="1" class="form-control" style="width:100px;">
            </div>
            <!-- Используем btn-primary (olive в вашем CSS) -->
            <button class="btn btn-primary" type="submit">Добавить в корзину</button>
        </form>
    </div>
</div>
{% endblock %}
